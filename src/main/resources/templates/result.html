
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talk Moa</title>
    <link th:href="@{/css/talk.css}" href="../static/css/talk.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js"></script>
    <script src="https://cdn.anychart.com/releases/v8/js/anychart-tag-cloud.min.js"></script>
</head>
<body>
    <header class="header">
        <a href="main.html" class="logo">TALK MOA</a>
    </header>
    <div class="body-wrapper">
        <section class="body-content">
            <br><br>
            <p class="section_title">[<span th:text="${roomName}"></span>] 채팅방에서 나눈 대화 분석 입니다!</p>
            <div class="section_title">
                <input type="text" placeholder="검색할 단어를 입력해주세요" class="search_input">
                <input type="button" value="검색" class="search_btn">
            </div>

            <div class="box_six">
                <div class="box_first">
                    <div style="text-align: center; margin-top: 10px;">
                    <div th:each="fr: ${total}" class="box_content_bold" style="font-weight: 400;">
                        <span th:text="${fr.subject()}"></span> (<span th:text="${fr.frequency()}"></span>) 회
                    </div>
                    </div>
                    <div class="box_content_rank char-area">
                        <div id="box_word_cloud" style="width:100%; height:100%;"></div>
                    </div>
                    <script th:inline="javascript">
                        anychart.onDocumentReady(() => {
                            const categories = ["Sino-Tibetan", "Indo-European", "Afro-Asiatic"];
                            const ranking = [[${ranking}]];
                            const data = [];
                            ranking.forEach((item, index) => {
                                data[index] = {
                                    "x": item.subject,
                                    "value": item.frequency,
                                    "category": categories[Math.floor(Math.random() * ranking.length)]
                                }
                            });
                            const chart = anychart.tagCloud(data);
                            chart.angles([0]);
                            chart.container("box_word_cloud");
                            chart.draw();
                        });
                    </script>
                </div>
            </div>
    
            <div class="box_six">
                <div class="box_color">
                    <div class="container-image">
                        <img th:src="@{/image/color-box-image1.png}" alt="" class="box_image">
                    </div>
                    <div class="box_bottom purple">
                        <p class="box_content_bold"><br>미디어를 전송한 횟수에요<br>(사진 / 동영상 / 첨부파일)</p>
                        <div th:each="mediaFr: ${media}">
                            <p class="box_content"><span th:text="${mediaFrStat.count}"></span>위.
                                <span th:text="${mediaFr.subject()}"></span> (<span th:text="${mediaFr.frequency()}"></span>회)
                            </p>
                        </div>
                    </div>
                </div>
                <div class="box_color">
                    <div class="box_top white-purple">
                        <p class="box_content_bold">이모티콘 애용자 순위에요</p><br>
                        <div th:each="emojiFr: ${emoji}">
                            <p class="box_content"><span th:text="${emojiFrStat.count}"></span>위.
                                <span th:text="${emojiFr.subject()}"></span> (<span th:text="${emojiFr.frequency()}"></span>회)</p>
                        </div>
                    </div>
                    <div class="container-image">
                        <img th:src="@{/image/color-box-image2.png}" alt="" class="box_image">
                    </div>
                </div>
                <div class="box_color">
                    <div class="box_top pink">
                        <p class="box_content_bold">이 시간대가 가장 조용했어요</p>
                        <div th:each="lowFr: ${low}">
                            <p class="box_content"><span th:text="${lowFrStat.count}"></span>위.
                                <span th:text="${lowFr.subject()}"></span> (<span th:text="${lowFr.frequency()}"></span>회)</p>
                        </div>
                        <br>
                        <form th:action="@{/graph/low}" method="get" style="text-align: center">
                            <input type="submit" value="그래프로 보기" class="graph_button">
                        </form>
                    </div>
                    <div class="container-image">
                        <img th:src="@{/image/color-box-image3.png}" alt="" class="box_image">
                    </div>
                </div>
            </div>
    
            <div class="box_six">
                <div class="box_color">
                    <div class="container-image">
                        <img th:src="@{/image/color-box-image4.png}" alt="" class="box_image">
                    </div>
                    <div class="box_bottom green">
                        <p class="box_content_bold">이 시간대에 가장 많이 떠들었어요</p>
                        <div th:each="highFr: ${high}">
                            <p class="box_content"><span th:text="${highFrStat.count}"></span>위.
                                <span th:text="${highFr.subject()}"></span> (<span th:text="${highFr.frequency()}"></span>회)</p>
                        </div>
                        <br>
                        <form th:action="@{/graph/high}" method="get" style="text-align: center">
                            <input type="submit" value="그래프로 보기" class="graph_button">
                        </form>
                    </div>
                </div>
                <div class="box_color">
                    <div class="box_top yellow">
                        <br><br>
                        <p class="box_content_bold">
                            <a th:href="@{/}" class="box_content_bold go_home">다른 대화내역도 분석해보기</a>
                        </p>
                    </div>
                    <div class="container-image">
                        <img th:src="@{/image/color-box-image5.png}" alt="" class="box_image">
                    </div>
                </div>
                <div class="box_color">
                    <div class="container-image">
                        <img th:src="@{/image/color-box-image6.png}" alt="" class="box_image">
                    </div>
                    <div class="box_bottom blue">
                        <p class="box_content_bold"><br><br>카카오톡으로 공유하기</p>
                    </div>
                </div>
            </div>

        </section>

        <footer class="footer">
            <div class="center_info">©TALKMOA</div>
            <div class="center_info">All copyrights reserved by 명지대 컴퓨터공학과 팀 프로젝트1 3조</div>
        </footer>
    </div>
</body>
</html>